include_rules
ifeq (@(ENABLE_BINARY_ANALYSIS),yes)

# BAT support library. This is also used by tools outside ROSE
run $(tool_compile_linklib) --install -I. -o libbat batSupport.C ../../src/librose
run $(public_header) batSupport.h

# Tools
run $(tool_compile_linkexe) --install -I. bat-ana.C          libbat
run $(tool_compile_linkexe) --install -I. bat-cc.C           libbat
run $(tool_compile_linkexe) --install -I. bat-cfg.C          libbat
run $(tool_compile_linkexe) --install -I. bat-cg.C           libbat
run $(tool_compile_linkexe) --install -I. bat-container.C    libbat
run $(tool_compile_linkexe) --install -I. bat-dis.C          libbat
run $(tool_compile_linkexe) --install -I. bat-entropy.C      libbat
run $(tool_compile_linkexe) --install -I. bat-linear.C       libbat
run $(tool_compile_linkexe) --install -I. bat-lsb.C          libbat
run $(tool_compile_linkexe) --install -I. bat-lsd.C          libbat
run $(tool_compile_linkexe) --install -I. bat-lsf.C          libbat
run $(tool_compile_linkexe) --install -I. bat-mem.C          libbat
run $(tool_compile_linkexe) --install -I. bat-prop.C         libbat
run $(tool_compile_linkexe) --install -I. bat-stack-deltas.C libbat
run $(tool_compile_linkexe) --install -I. bat-trace.C        libbat
: bat-dis |> cp -p %f %o |> bat-dis-simple $(ROOT)/$(INSTALL_STAGING)/bin/<staging>

# Tests
run $(test) bat-ana          ./bat-ana --self-test
run $(test) bat-cc           ./bat-cc --self-test
run $(test) bat-cfg          ./bat-cfg --self-test
run $(test) bat-container    ./bat-container --self-test
run $(test) bat-dis          ./bat-dis --self-test
run $(test) bat-entropy      ./bat-entropy --self-test
run $(test) bat-linear       ./bat-linear --self-test
run $(test) bat-lsb          ./bat-lsb --self-test
run $(test) bat-lsf          ./bat-lsf --self-test
run $(test) bat-mem          ./bat-mem --self-test
run $(test) bat-prop         ./bat-prop --self-test
run $(test) bat-stack-deltas ./bat-stack-deltas --self-test
run $(test) bat-trace        ./bat-trace --self-test

endif
